---
layout: post
title: MSA 도입기 (1)
subtitle: 회사에서 처음으루 MSA 도입을 시작 .. 여정은 어떻게 될까?
categories: diary
tags: [MSA, Spring]
---

현재 회사에서 앱버전이 모놀리식으로 개발이 되어 있는데 이번 스프린트로 웹버전을 만들기로 했는데 해당 부분을 한번 접해보고 싶은 MSA로 도입하기로 결정났다!! 🎉🎉🎉

일단 웹버전을 MSA로 구축이 성공적으로 진행이 된다면 앱 버전도 같이 MSA로 변환해주는 작업을 하기로 진행했다.

그래서 MSA를 모르는 초짜여서 `스프링 마이크로서비스 코딩 공작소(2판)`로 MSA에 대한 지식을 공부를 진행했는데 역시.. 회사에서 많은 시간을 주긴 어려워 보인다.. 어쩔 수 없이 전부 파악하지 못한 상태로 MSA를 도입하면서 공부를 하기 시작했다.

MSA 모르는 내가 개발을 진행하면서 겪었던 문제를 한번 기록하고자 했다. 인원은 나, 사수 1명 주니어 개발자라 얼마나 길고 긴 개발이 진행 될 수도 있지만 재미있는 개발 시간이 됐음 좋겠다!

기본적인 MSA 서버 구성은 앱에 있는 도메인들로 구성이 될 것 같다.

처음에는 유저와 상담사를 나눠서 도메인 설계를 하려 했지만 해당 방법으로 진행하려 하니 상담 API 같은 부분을 작성할 때 두 쪽 중복으로 행동하는 현상이 발생했다. 

그래서 유저와 상담사를 나누는 것이 아니라 행동(정보, 상담, 결제, 리뷰)을 나눠서 도메인 설정하면 어떨까? 생각을 했는데 가설로 시나리오를 써봤는데 꽤 중복 적이지 않고 좀 더 도메인 주도 설계 같은 느낌이 와 닿아서 해당 방법으로 시작하기로 했다.

현재 서버 구상은 다음과 같다.

- Docker
- Jenkins
- Bitbucket
- Spring boot
- redis
- netty

현재 웹 버전 빨리 구축해야 하는 입장이라서 K8s, Kafka 등 다양한 기술들을 써서 좀 더 탄탄한 시스템을 만들고 싶지만 구축 뒤 개선할 때 진행하기로 했다.

아직 웹 버전 요구사항도 정리가 안되었기 때문에 일단 다음에는 Jenkins 설정 및 Stage 배포와 Nginx 설정을 진행 계획이다